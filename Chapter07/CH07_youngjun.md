## 다양한 보조기억장치

가장 대중적인 보조기억장치는 하드 디스크와 플레시 메모리다.

### 하드 디스크

하드 디스크는 자기적인 방식으로 데이터를 저장하는 보조기억장치(자기 디스크 라고도 함)

하드 디스크에서 실직적으로 데이터가 저장되는 곳은 그림속의 원판인 플래터이다. 플래터는 자기 물질로 덮여 있고, N극과 S극은 0과 1의 역할을 수행한다.

플래터를 회전시키는 구성 요소를 스필들이라고 하고, 스핀들이 플래터를 돌리는 속도는 RPM 단위로 표현된다.

플래터를 대상으로 데이터를 읽고 쓰는 구성 요소는 헤드이다. 헤드는 플래터 위에서 미세하게 떠 있는 채로 데이터를 읽고 쓰는 부품이다. 헤드를 원하는 위치로 이동시키는 디스크 암이 부착되어 있다.

일반적으로 여러 겹의 플래터로 이루어져 있고, 플래터 양면을 모두 사용할 수 있다. 양면 플래터를 사용하면 위아래로 플래터당 두 개의 헤드가 사용된다.

플래터는 트랙과 섹터라는 단위로 데이터를 저장한다. 플래터를 여러 동심원으로 나누었을 때 그중 하나의 원을 트랙이라 부른다. 섹터는 하드 디스크의 가장 작은 전송 단위로 일반 적으로 512바이트 정도의 크기를 가지고 있지만, 정확한 크기는 하드 디스크에 따라 차이가 있다.

여러 겹의 트랙이 위치한 곳을 모아 연결한 논리적 단위를 실린더라고 부른다. 연속된 정보는 보통 한 실린더에 기록된다. 연속된 정보를 하나의 실린더에 기록하는 이유는 디스크 암을 움직이지 않고도 바로 데이터에 접근할 수 있기 때문이다.

하드 디스크가 저장된 데이터에 접근하는 시간은 크게 탐색 시간, 회전 지연, 전송 시간으로 나뉜다.

- 탐색 시간은 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간을 의미
- 회전 지연은 헤드가 있는 곳으로 플래터를 회전시키는 시간을 의미
- 전속 시간은 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간을 의미

탐색 시간과 회전 지연을 단축시키기 위해서는 RPM을 높이는 것도 중요하지만, 참조 지역성에 따라 접근하려는 데이터가 플래터 혹은 헤드를 조금만 옮겨도 접근할 수 있는 곳에 위치해 있는것도 중요

### 플래시 메모리

플래시 메모리 기반의 보조기억 장치도 많이 사용한다. 흔히 사용하는 USB, SD 카드, SSD가 모두 플래시 메모리 기반의 보조기억장치이다.

플래시 메모리는 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치이다. 플래시 메모리는 보조기억장치 범주에만 속한다기 보다는 다양한 곳에서 널리 사용하는 저장 장치로 보는 것이 옳다.

플래시 메모리에는 플래시 메모리에서 데이터를 저장하는 가장 단위인 셀이라는 단위가 있다. 한 셀에 1비트를 저장할 수 있는 플래시 메모리를 SLC 타입, 2비트를 저장할 수 있는 플래시 메모리를 MLC 타입, 3비트를 저장할 수 있는 플래시 메모리를 TLC타입이라 한다.

- SLC 타입
    
    한 셀로 두개의 정보를 표현할 수 있다. 다른 타입에 비해 빠른 입출력이 가능하다.
    
    수명도 다른 타입보다 길어서 보다 많이 데이터를 쓰고 지우고를 반복할 수 있다.
    
    그러나 용량 대비 각격이 높다
    
- MLC 타입
    
    한 셀로 네 개의 정보를 표현할 수 있다. SLC 타입보다 속도와 수명을 떨어지지만, 대용화가 유리하다. 
    
- TLC 타입
    
    한 셀로 여덟 개의 정보를 표현할 수 있다. SLC나 MLC 타입 보다 수명과 속도가 떨어지지만
    
    대용량화 하기가 유리하고, 가격도 저렴하다. 
    

셀들이 모여 만들어진 단위를 페이지, 페이지가 모여 만들어진 단위를 블록이라 한다. 블록이 모여 플레인, 플레인이 모여 다이가 된다.

플래시 메모리에서 읽기와 쓰기는 페이지 단위로 이루어 진다. 그러나 삭제는 페이지보다 큰 블록 단위로 이루어 진다. 읽기/쓰기 단위와 삭제 단위가 다르다는 것이 플래시 메모리의 가장 큰 특징 중 하나이다.

페이지는 Free, Valid, Invalid 총 3개의 상태를 가질 수 있다.

Free 상태는 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태

Valid 상태는 이미 유효한 데이터를 저장하고 있는 상태

Invalid 상태는 쓰레기값이라 부르는 유효하지 않은 데이터를 저장하고 있는 상태

플래시 메모리는 하드 디스크와는 달리 덮어쓰기가 불가능하여 Valid 상태인 페이지에는 새 데이터를 저장할 수 없다.

- 플래시 메모리의 간단한 동작
    
    X라는 블록이 네 개의 페이지로 이루어져 있고 그중 두 개의 페이지에는 A와 B라는 데이터가 저장되어 있다고 가정한다.
    
    여기서 블록 X에 새로운 데이터 C를 저장한다면 나머지 페이지에 C가 저장된다
    
    새롭게 저장된 C와 기존에 저장되어 있던 B는 그대로 둔 채 기존의 A만을 A`로 수정해야 할 때, 플래시 메모리는 덮어쓰기가 불가능하기 때문에, 기존의 A는 Invalid 상태가 되고 나머지 페이에 A`가 저장된다.
    
    결과적으로 블록 X의 Valid 페이지는 B,C,A`가 된다.
    
    이렇게 되면 쓰레기값을 저장하고 있어서 용량 낭비가 된다. 플래시 메모리에서 삭제는 블록 단위로 수행되기 때문에 이러한 쓰레기 값을 정리하기 위해서 가비지 컬렉션이라는 기능을 제공한다.
    
    가비지 컬렉션은 유효한 페이지들만 새로운 블록으로 복사한 뒤 기존의 블록을 삭제하는 기능이다.
  

## RAID의 정의와 종류

1TB 하드 디스크 네 개로 RAID를 구성하면 4TB 하드 디스크 한 개의 성능과 안전성을 능가할 수 있다.

### RAID의 정의

보조기억장치에 수명이 있기 때문에 데이터를 안전하게 관리하기 위한 방법 중 하나가 RAID이다.

RAID는 하드 디스크와 SSD를 사용하는 기술로, 데이터의 안전성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 하나의 논리적 보조기억장치처럼 사용하는 기술

### RAID의 종류

RAID 구성 방법을 RAID 레벨이라 표현하고 대표적으로 RAID 0, RAID 1, RAID 2, RAID 3, RAID 4, RAID 5, RAID 6,이 있고, 그로부터 파생된 RAID 10, RAID 50 등이 있다.

- RAID 0
    
    RAID 0은 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 구성 방식
    
    이 때 데이터를 저장할 때 각 하드 디스크는 번갈아 가며 데이터를 저장한다.
    
    줄무늬처럼 분산되어 저장된 데이터를 스트라입이라 하고, 분산하여 저장하는 것을 스트라이핑이라 한다.
    
    스트라이핑되면 저장된 데이터를 읽고 쓰는 속도가 이론 상 구성한 저장 장치 개수 만큼 빨라진다.
    
    그러나 RAID 0으로 구성된 하드 디스크 중 하나에 문제가 생긴다면 모든 하드 디스크의 정보를 읽는 데 문제가 생길 수 있어 등장한 것이 RAID 1이다.
    
- RAID 1
    
    RAID 1은 복사본을 만드는 방식이라 미러링이라고도 부른다.
    
    RAID 0처럼 데이터 스트라이핑이 사용되지만, 나머지 반절은 동일한 내용을 저장한다.
    
    그래서 RAID 0보다 느리고, 용량이 적어지는 단점이 있어 비용이 증가한다.
    
    그러나 복구가 매우 간단해서 안전하다.
    
- RAID 4
    
    RAID 4는 RAID 1처럼 완전한 복사본을 만드는 대신 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 두는 구성 방식이다.
    
    오류를 검출하고 복구하기 위한 정보를 패리티 비트라 한다.
    
    RAID 4에서는 패리티를 저장한 장치를 이용해 다른 장치들의 오류를 검출하고, 오류가 있다면 복구한다. 
    
- RAID 5
    
    RAID 4에서는 새로운 데이터가 저장될 때마다 패리티를 저장하는 디스크에도 데이터를 쓰게 되므로 패리티를 저장하는 장치에 병목 현상이 발생하는 문제가 있다.
    
    RAID 5는 패리티 정보를 분산하여 저장하는 방식으로 RAID 4의 병목 현상을 해소한다. 
    
- RAID 6
    
    RAID 6의 구성은 기본적으로 RAID 5와 같으나 서로 다른 두 개의 패리티를 두는 방식이다. RAID 6은 RAID 4나 RAID 5보다 안전한 구성이라 볼 수 있다.
    
    RAID 6은 저장할 패리티가 두 개이므로, 쓰기 속도는 RAID 5보다 느리다.
    
    따라서 RAID 6은 데이터 저장 속도를 조금 희생하더라도 안전하게 보관하고 싶을 때 사용하는 방식이다.

이 외에도 RAID 0 과 RAID 1을 혼합한 RAID 10 방식도 있고, RAID 0과 RAID 5를 혼합한 RAID 50 방식도 있다.
