# Chapter 07 보조기억장치

## 07-1 다양한 보조기억장치

### 하드 디스크(HDD: Hard Disk Drive)

- 자기적인 방식으로 데이터를 저장 &rarr; 자기 디스크
- 구조
  - **플래터(platter)**: 데이터가 저장되는 원판. N극과 S극을 저장함. N극과 S극은 0과 1의 역할을 수행
  - **스핀들(spindle)**: 플래터를 회전시킴
    - **RPM(Revolution Per Minute)**: 분당 회전수
  - **헤드(head)**: 데이터를 읽고 씀
  - **디스크 암(disk arm)**: 헤드를 이동시킴
- 데이터 단위
  - **트랙(track)**: 한 플래터 속 동심원
  - **섹터(sector)**: 트랙 속 조각. 가장 작은 전송 단위. 512 바이트 정도의 크기.
  - **블록(block)**: 하나 이상의 섹터를 묶은 단위
  - **실린더(cylinder)**: 여러 겹의 플래터 상에서 같은 트랙끼리 연결
- 데이터 접근 시간
  - **탐색 시간**: 데이터가 있는 트랙까지 헤드를 이동시키는 시간
  - **회전 지연**: 헤드가 있는 곳으로 플래터를 회전시키는 시간
  - **전송 시간**: 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간

> **다중 헤드 디스크와 고정 헤드 디스크**
>
> - 단일 헤드 디스크/이동 헤드 디스크
> - 다중 헤드 디스크/고정 헤드 디스크: 헤드가 트랙별로 여러개. 탐색 시간 0

### 플래시 메모리(flash memory)

- 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치
  - USB 메모리, SD 카드, SSD, ROM(주기억장치)
- 종류
  - NAND 플래시 메모리: 대용량 저장 장치로 많이 사용 (why?)
  - NOR 플래시 메모리
- 단위
  - 셀(cell) < 페이지(page) < 블록(block) <  플레인(plane) < 다이(die)
  - 셀(cell) 종류
  
    |구분|SLC|MLC|TLC|
    |---|---|---|---|
    |셀당 bit|1|2|3|
    |수명|길다|보통|짧다|
    |읽기/쓰기 속도|빠르다|보통|느리다|
    |용량 대비 가격|높다|보통|낮다|

- **읽기와 쓰기는 페이지 단위, 삭제는 블록 단위로 이루어짐**
- 페이지 상태
  - **Free**: 어떠한 데이터를 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
  - **Valid:** 유효한 데이터를 저장하고 있는 상태
  - **Invalid**: 유효하지 않은 데이터(쓰레기값)을 저장하고 있는 상태
- **플래시 메모리는 덮어쓰기가 불가능해서 Valid 상태인 페이지에 새 데이터를 저장할 수 없다**
  - 예시) A를 수정할 때, 기존의 A는 Invalid 상태로 변하고, 새로운 A'는 다른 Free 페이지에 저장됨
- **가비지 컬렉션** 기능: 쓰레기값(Invalid)을 정리해서 용량 낭비 방지
  1. 유효한 페이지들만을 새로운 블록으로 복사한 뒤,
  2. 기존의 블록을 삭제

## 07-2 RAID의 정의와 종류

- **RAID(Redundant Array of Independent Disks)**: 데이터의 안전성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술
- RAID 레벨(구성 방법)
  - **RAID 0**
    - 여러 개의 보조기억장치에 번갈아 가며 데이터를 저장
    - 분산되어 저장된 데이터는 **스트라입**, 분산하여 저장하는 것은 **스트라이핑**
    - 데이터를 동시에 읽고 쓸 수 있어서 하나의 대용량 저장 장치를 이용한 것 보다 속도가 빠름
      - 이론 상 RAID 0로 구성된 1TB 저장 장치 네 개의 속도가 4TB 저장 장치 한 개보다 4배가량 빠름
    - RAID 0으로 구성된 하드 디스크 중 하나에 문제가 생기면 모든 하드 디스크의 정보를 읽는 데 문제 생김
  - **RAID 1**
    - 복사본을 만드는 방식 &rarr; 미러링
    - 복구가 간단
    - 사용 가능한 용량이 적어짐
  - **RAID 4**
    - **패러티 비트**를 저장하는 장치를 두어서 다른 장치들의 오류를 검출하고 복구
      - 패러티 비트는 원래 오류 검출만 가능하지만, RAID에서는 오류 수정도 가능
    - RAID 1보다 적은 하드 디스크로 데이터를 안전하게 보관
    - 패러티를 저장하는 장치에 병목 현상이 발생한다는 문제
  - **RAID 5**
    - 패러티 정보를 분산하여 저장해서 병목 현상 해소
  - **RAID 6**
    - RAID 5의 구성과 같으나 두 개의 패러티를 둠
    - RAID 5보다 쓰기 속도가 느림
  - **Nested RAID**
    - 여러 RAID 레벨을 혼합한 방식
    - eg) RAID 10 (0+1), RAID 50 (0+5)