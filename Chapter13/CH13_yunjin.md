# Chapter 13 교착 상태

# 13-1 교착 상태란

- 교착 상태
    - 일어나지 않을 사건을 기다리며 진행이 멈춰 버리는 현상
    - 식사하는 철학자 문제
- 자원 할당 그래프
    - 프로세스는 원으로, 자원의 종류는 사각형으로 표현
    - 사용할 수 있는 자원의 개수는 자원 사각형 내에 점으로 표현
    - 프로세스가 어떤 자원을 할당받아 사용 중이라면 자원에서 프로세스를 향해 화살표를 표시
    - 프로세스가 어떤 자원을 기다리고 있다면 프로세스에서 자원으로 화살표를 표시
- **교착 상태 발생 조건**
    - **모두 만족 → 교착상태**
    - **하나라도 만족하지 않으면 → 발생 X**
    - 네 가지
        - `상호 배제`
            - 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없을 때
        - `점유와 대기`
            - 자원을 할당받은 상태에서 다른 자원을 할당받기를 기다리는 상태
        - `비선점`
            - 그 자원을 이용하는 프로세스의 작업이 끝나야만 비로소 이용
        - `원형 대기`
            - 프로세스들이 원의 형태로 자원을 대기하는 상태

# 13-2 교착 상태 해결 방법

- **교착 상태 `예방`**
    - 상호 배제, 점유와 대기, 비선점, 원형 대기 중 `하나의 조건이라도 만족시키지 않게` 할당하면 교착 상태가 발생하지 않음.
        - 상호 배제 → 없애는 건 현실적으로 불가능
        - 점유와 대기 → 없애면 활용률이 낮아짐. 기아 현상 우려
        - 비선점 → 없애면 CPU 에 대해서만 효과적, 입출력 장치는 ?
        - 원형 대기 → 자원에 번호를 붙이고 오름차순으로 할당 ok, 번호 붙이는 건 힘듬.
- **교착 상태 회피**
무분별한 자원 할당이 아니라, 조심 조심 할당하는 것
교착 상태 회피 방식은 항시 안전 상태를 유지하도록 자원을 할당하는 방식이라 보면 되겠다.
    - `안전 순서열`
        - 교착 상태 없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서
    - `안전 상태`
        - 교착 상태 없이 모든 프로세스가 자원을 할당 받고 종료 될 수 있는 상태
        - `안전 순서열이 있는 상태`
    - `불안전 상태`
        - 교착 상태가 발생할 수 도 있는 상태
        - `안전 순서열이 없는 상태`
    
- 교착 상태 검출 후 `**회복**`
    - 프로세스들이 자원을 요구할 때마다 그때그때 모두 할당하며, 교착 상태 발생 여부를 주기적으로 검사하고, 교착 상태가 검출 되면 그때그때 회복하는 방식
        - 선점을 통한 회복
            - 교착 상태가 해결 될 때 까지 한 프로세스씩 자원을 몰아주는 방식
        - 프로세스 강제 종료를 통한 회복
            - 교착 상태가 없어질 때 까지 한 프로세스 씩 강제 종료 or 모두 종료
        - 교착 상태 무시
            - 타조 알고리즘