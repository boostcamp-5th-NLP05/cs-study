# 교착 상태

# 13-1 교착 상태란
## 식사하는 철학자 문제
  - 교착상태를 설명하기 위한 예시
  - 철학자 : 프로세스 또는 쓰레드, 포크 : 자원, 생각하는 행위 : 자원을 기다리는 것
  - 과정
    - 철학자는 계속 생각을 하다가 왼쪽 포크를 사용 가능하면 집어든다.
    - 철학자는 계속 생각을 하다가 오른쪽 포크를 사용 가능하면 집어든다.
    - 모두 집어들면 정해진 시간동안 식사를 한다.
    - 식사를 마치면 오른쪽 포크를 내려놓는다.
    - 이후에 왼쪽 포크를 내려놓는다.
    - 이를 처음부터 반복한다.
### 교착 상태
  - 일어나지 않을 사건을 기다리며 진행이 멈춰버리는 현상

## 자원 할당 그래프
각 프로세스가 어떤 자원을 사용하고, 어떤 자원을 기다리는지 간단히 표현한 그래프
### 예시
![image](https://github.com/boostcamp-5th-NLP05/cs-study/assets/96599427/3a52f1a9-fe92-4e21-90d1-85f9dfffce72)

## 교착 상태 발생 조건
4가지 조건들이 모두 만족할 때 교착 상태 발생 가능성이 생김
### 상호 배제
  - 한 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없는 상황
### 점유와 대기
  - 프로세스가 자원을 할당 받은 상태에서 다른 자원의 할당을 기다리는 상태
### 비선점
  - 어떤 프로세스도 다른 프로세스에 할당된 자원을 뺏지 못하면 교착상태가 발생
### 원형 대기
  - 프로세스들이 원형 형태로 자원을 대기하는 상태

# 13-2 교착 상태 해결 방법
## 교착 상태 예방
### 자원의 상호 배제 예방 -> 다소 무리
  - 모든 자원을 공유 가능하게 만듬
### 점유와 대기 예방 -> 자원 활용률이 낮아질 우려 + 많은 자원을 사용하는 프로세스가 불리 = 무한정 기다리는 기아현상이 발생할 가능성
  - 특정 프로세스에 자원을 모두 할당하거나 아예 할당하지 않는 방식으로 자원을 분배
### 비선점 조건 예방 -> 범용성이 떨어짐
  - 자원을 이용 중인 프로세스로 부터 해당 자원을 빼앗음
### 원형 대기 조건 예방 -> 컴퓨터 시스템 내 모든 자원에 번호를 붙이기 어렵고 어떤 번호가 붙는지에 따라 특정 자원 활용률이 떨어질 수 있음
모든 자원에 번호를 붙이고 오름차순으로 자원을 할당

## 교착 상태 회피
각 프로세스의 최대 요구량을 고려해서 자원을 할당
안전 상태를 유지하도록 자원을 할당하는 방식
### 안전 상태
  - 교착 상태가 발생하지 않게 모든 프로세스가 정상적으로 자원 할당 및 종료 될 수 있는 상태
### 불안전 상태
  - 교착 상태가 발생할 수도 있는 상황

## 교착 상태 검출 후 회복
### 선점을 통한 회복
  - 교착 상태가 해결될 때까지 한 프로세스씩 자원을 몰아주는 방식
### 프로세스 강제 종료를 통한 회복
  - 교착 상태에 놓인 프로세스를 모두 종료
  - 한 프로세스씩 종료

++ 타조 알고리즘 : 드물게 발생하는 잠재적 문제를 무시로 대처하는 방법
