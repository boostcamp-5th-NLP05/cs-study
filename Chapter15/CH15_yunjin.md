# Chapter 15 파일 시스템

# 15-1 파일과 디렉터리

- 파일
    - 하드 디스크나 SSD와 같은 보조기억장치에 저장된 관련 정보의 집합
    - 의미있고 관련 있는 정보를 모은 논리적 단위
    - 부가 정보
        - 속성(attribute), 메타데이터(metadata)
    - 파일 속성, 파일 유형
        
  
        
        | 속성 이름 | 의미 |
        | --- | --- |
        |  |  |
        |  |  |
        |  |  |
        |  |  |
        |  |  |
        
        | 파일 유형 | 대표적인 확장자 |
        | --- | --- |
        | 실행 파일 |  |
        | 목적 파일 |  |
        | 소스 코드 파일 |  |
        | 워드 프로세서 파일 |  |
        | 라이브러리 파일 |  |
        | 멀티미디어 파일 |  |
        | 백업/보관 파일 |  |

- 파일 시스템 (file system)을 위한 시스템 호출
    - 파일을 다루는 모든 작업은 운영체제에 의해 이뤄짐
        - 시스템 호출
            - 파일 생성
            - 파일 삭제
            - 파일 열기
            - 파일 닫기
            - 파일 읽기
            - 파일 쓰기

- `디렉터리`
    - 파일들을 일목요연하게 관리하기 위해 디렉터리를 이용 (=폴더)
    - 구분
        - 과거 : 1단계 디렉터리(single-level directory)
        - 현대 : 트리 구조 디렉터리 (tree-structured directory)
    - 경로
        - 절대 경로
            - 루트 디렉터리부터 시작하는 경로
        - 상대 경로
            - 현재 디렉터리부터 시작하는 경로
    - 시스템 호출
        - 디렉터리 생성
        - 디렉터리 삭제
        - 디렉터리 열기
        - 디렉터리 닫기
        - 디렉터리 읽기
    - 디렉터리 엔트리
        - 디렉터리는 특별한 형태의 팔일
        - 디렉터리 엔트리 (Next … )

# 15-2 파일 시스템

- 파일 시스템
    - 학습한 파일과 디렉터리를 보조기억장치에 일목요연하게 저장하고 접근할 수 있게 하는 운영체제 내부 프로그램
    - 종류
        - `FAT 파일 시스템`
        - `유닉스 파일 시스템`
    
- `파티셔닝`과 `포매팅`
    - 보조기억장치를 사용하려면 파티션을 나누는 작업(파이셔닝)과 포맥 작업(포매팅)을 거쳐야 하기 때문
    - **파티셔닝(partitioning)**
        - 저장 장치의 논리적인 영역을 구획하는 작업을 의미함
        - 파티션을 나누는 작업
        - 저장 장치의 논리적인 영역을 구획하는 작업
    - **포매팅(formatting)**
        - 어떤 방식으로 파일을 관리할지 결정, 새로운 데이터를 쓸 준비하는 작업
        - 어떤 종류의 파일 시스템을 사용할지 결정

- `파일 할당` 방법
운영체제는 파일과 디렉터리를 블록 단위로 읽고 씀
    - `연속` 할당
        - 보조기억장치 내 연속적인 블록에 파일을 할당
        - 외부 단편화를 야기함.
    - `불연속` 할당
        - `연결` 할당
            - 각 블록 일부에 다음 블록의 주소를 저장하여 각 블록이 다음 블록을 가리키는 형태로 할당하는 방식
            - 단점
                - 반드시 첫 번째 블록부터 하나씩 차례대로 읽어야 한다.
                - 하드웨어 고장이나 오류 발생 시 해당 블록 이후 블록은 접근할 수 없다.
        - `색인` 할당
            - 파일의 모든 블록 주소를 `색인 블록(index block)`이라는 하나의 블록에 모아 관리하는 방식
- 파일 시스템
    - FAT 파일 시스템
        - USB 메모리, SD 카드 등의 저용량 저장 장치에서 사용되는 FAT 파일 시스템
        - 파일 할당 테이블(FAT; File Allocation Table)
        - `연결 할당 기반 파일 시스템`
    - 유닉스 파일 시스템
        - 유닉스 계열 운영체제에서 사용
        - i-node(index-node)
        - `색일 할당 기반 방식`
        - 단점
            - 블록 주소 중 열 두개에는 직접 블록 주소를 저장
            - 첫째 내용으로 충분하지 않다면 열 세번째 주소에 단일 간접 블록 주소를 저장
            - 둘째 내용으로 충분하지 않다면 열 네번째 주소에 이중 간접 블록 주소를 저장

- 추가적인 파일 시스템
    - NT 파일 시스템 (NTFS)
    - ext 파일 시스템

- 저널링 파일 시스템
    - 시스템 크러시
    - 저널링(journaling) 기법
    - 
- **마운트(mount)**
    - 한 저장 장치의 파일 시스템에서 다른 저장 장치의 파일 시스템에 접근할 수 있도록 파일 시스템을 편입시키는 작업을 의미
    -