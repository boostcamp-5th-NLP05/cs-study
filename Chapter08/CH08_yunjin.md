# Chapter 08 입출력장치

## 8-1 **장치 컨트롤러와 장치 드라이버**

장치 컨트롤러, 장치 드라이버를 통해 컴퓨터는 외부 장치와 연결, 소통

- `장치 컨트롤러` (하드웨어)
    - 전송률 (데이터를 얼마나 빨리 교환할 수 있는지를 나타내는 지표)
    - CPU 와 입출력 장치의 전송률 차이가 너무 크기 때문에 `장치 컨트롤러`를 사용한다.
        - 입출력 제어기, 입출력 모듈
    - 역할
        - CPU와 입출력장치 간의 통신 중개
        - 오류 검출
        - 데이터 버퍼링
    - 버퍼링
        - 전송률이 높은 장치와 낮은 장치 사이에 주고 받는 데이터를 버퍼 라는 임시 저장 공간에 저장하여 전송률을 비슷하게 맞추는 방법
    - 장치 컨트롤러의 구조
        - 데이터 레지스터
            - CPU와 입출력장치 사이에 주고받을 데이터가 담기는 레지스터
        - 상태 레지스터
            - 입출력장치의 상태 정보를 저장
        - 제어 레지스터
            - 입출력장치가 수행할 내용에 대한 제어 정보와 명령을 저장


- `장치 드라이버` (소프트웨어)
    - 장치 컨트롤러의 동작을 감지하고 제어함으로써 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 프로그램
    - 시스템 버스 이용
    


## 8-2 **다양한 입출력방법 (1.** 프로그램 입출력, 2. 인터럽트 기반 입출력, 3. DMA  입출력)

1. `프로그램 입출력`
    - 프로그램 속 명령어로 입출력장치를 제어하는 방법
    CPU가 `장치 컨트롤러의 레지스터 값`을 읽고 씀으로써 이루어짐.
    
    
    - 방식
        - 메모리 맵 입출력
            - 메모리에 접근하기 위한 주소 공간과 입출력장치에 접근하기 위한 주소 공간을 `하나의 주소 공간`으로 간주하는 방법
            
            
            분리
            
            
        - 고립형 입출력
            - 메모리를 위한 주소 공간과 입출력장치를 위한 주소 공간을 분리하는 방법
        
        
        | 메모리 맵 입출력 | 고립형 입출력 |
        | --- | --- |
        | 메모리와 입출력 장치는 같은 주소 공간 사용 | 메모리와 입출력 장치는 분리된 주소 공간 사용 |
        | 메모리 주소 공간이 축소됨 | 메모리 주소 공간이 축소되지 않음 |
        | 메모리와 입출력장치에 같은 명령어 사용 가능 | 입출력 전용 명령어 사용 |
        
2. `인터럽트 기반 입출력`
    - 입출력장치에 의한 하드웨어 인터럽트는 장치 컨트롤러에 의해서 발셍
    - 인터럽트 비트 비활성화 → 인터럽트 무시
        - 인터럽트 비트 비활성화해도 막을 수 없는 인터럽트
            - NMI 인터럽트(Non-Maskable Interupt)
        - 인터럽트 비트 비활성화로 막을 수 없는 인터럽트 → 우선 순위 관리 대상
            - PIC (Programmable Interrupt Controller) 로 수행함.
                - 여러 장치 컨트롤러에 연결되어 장치 컨트롤러에서 보낸 하드웨어 인터럽트 요청들의 우선순위를 판별한 뒤 CPU에 지금 처리해야 할 하드웨어가 인터럽트가 무엇인지 알려주는 장치
                
                
                PIC
                
 
                
3. `DMA  입출력`
    - DMA(Direct Memory Access) : `CPU 를 거치지 않고` 메모리에 직접적으로 접근
        - CPU 분담을 줄일 수 있음.
        - 프로그램 입출력, 인터럽트 기반 입출력 은 CPU 부담
        
        
    - 시스템 버스에 연걸된 DMA 컨트롤러 하드웨어 필요
        - 시스템 버스는 공용자원. CPU 가 사용 안할 때 DMA 가 이용함
            - 사이클 스틸링 이라 함. (DMA의 시스템 버스 이용)
        - ———>>> 장치 컨트롤러가 입출력 버스를 사용하게 함.

- 입출력 버스
    - PCI 버스
    - PCI Express (PCle) 버스
    - PCle 슬롯


PCle 슬롯

- 입출력 전용 CPU 를 이용해서 입출력 채널을 만들 수 있다.
    - CPU 가 장착된 프린터.