## RAM의 특징과 종류

### RAM의 특징

RAM에는 실행할 프로그램의 명령어와 데이터가 저장되고, CPU에서 직접 접근이 가능하다.

전원을 끄면 RAM에 저장된 명령어와 데이터가 모두 날라가고, 이러한 저장 장치를 휘발성 저장 장치라고 한다.

전원이 꺼져도 저장된 내용이 유지되는 저장장치는 비휘발성 저장 장치라고 한다. HDD, SSD, CD-ROM, USB 메모리와 같은 보조기억장치가 대표적인 비휘발성 저장 장치이다.

일반적으로 보조기억장치인 비휘발성 저장 장치에는 ‘보관할 대상’을 저장하고, 휘발성 저장 장치인 RAM에는 ‘실행할 대상’을 저장한다.

CPU가 실행하고 싶은 프로그램이 보조기억장치에 있다면 RAM으로 복사하여 저장한 뒤 실행한다.

### RAM의 용량과 성능

RAM의 용량이 적다면 보조기억장치에서 실행할 프로그램을 가져오는 일이 잦아 실행 시간이 길어진다.

RAM 용량이 충분히 크다면, 보조기억장치에서 많은 데이터를 가져와 미리 RAM에 저장할 수 있다.

### RAM의 종류

- DRAM
    
    Dynamic RAM의 준말로, 저장된 데이터가 동적으로 변하는 RAM
    
    DRAM은 시간이 지나면 저장된 데이터가 점차 사라지는 RAM
    → 데이터의 소멸을 막기 위해 일정 주기로 데이터를 재활성화 해야 한다.
    
    이러한 단점에도 소비전력이 비교적 낮고, 저렴하고, 집적도가 높기 때문에 일반적으로 쓰임
    
- SRAM
    
    Static RAM의 준말로, 저장된 데이터가 변하지 않는 RAM
    
    시간이 지나도 데이터가 사라지지 않아서, 데이터를 재활성화할 필요가 없음
    
    SRAM은 DRAM보다 일반적으로 속도도 더 빠르다.
    
    이러한 장점에도 DRAM보다 집적도가 낮고, 소비 전력도 크고, 가격이 더 비싸서 일반적으로 사용되지 않음
    
    대용량으로 만들어질 필요는 없지만 속도가 빨라야 하는 저장 장치인 캐시 메모리에 사용된다.
    
    |  | DRAM | SRAM |
    | --- | --- | --- |
    | 재충전 | 필요함 | 필요 없음 |
    | 속도 | 느림 | 빠름 |
    | 가격 | 저렴함 | 비쌈 |
    | 집적도 | 높음 | 낮음 |
    | 소비 전력 | 적음 | 높음 |
    | 사용 용도 | 주기억장치(RAM) | 캐시 메모리 |
- SDRAM
    
    클럭  신호와 동기화된, 발전된 형태의 DRAM(SRAM과 관계 없음)
    
    클럭 신호와 동기화되었다 라는 말은 클럭 타이밍에 맞춰 CPU와 정보를 주고받을 수 있음을 의미
    
- DDR SDRAM
    
    Double Data Rate SDRAM은 최근 가장 흔히 사용되는 RAM
    
    대역폭(데이터를 주고받는 길의 너비)을 넓혀 속도를 빠르게 만든 SDRAM
    
    DDR SDRAM은 SDRAM보다 대역폭이 두 배 넓음
    
    대역폭이 두 배 넓어지면 한 클럭당 두 번씩 CPU와 데이터를 주고받을 수 있어서, 전송 속도가 두 배 가량 빠름
    
    DDR뒤에 숫자가 1 올라갈 수록 대역폭이 두 배씩 넓어짐
    

## 메모리의 주소 공간

### 물리 주소와 논리 주소

CPU와 메모리에 저장되어 실행중인 프로그램은 메모리 몇 번지에 무엇이 저장되어 있는지 알지 못함

메모리에는 새롭게 실행되는 프로그램이 적재되고, 실행이 끝난 프로그램이 삭제되고, 같은 프로그램을 실행하더라도 실행할 때마다 적재되는 주소가 달라질 수 있는 등 메모리에 저장된 정보는 변하기 때문

CPU와 실행 중인 프로그램이 사용하는 논리 주소와 메모리가 사용하는 물리 주소가 있다.

메모리가 사용하는 물리 주소는 정보가 실제로 저장된 하드웨어상의 주소를 의미

CPU와 실행중인 프로그램이 사용하는 논리 주소는 실행 중인 프로그램 각각에게 부여된 0번지부터 시작되는 주소를 의미

CPU가 메모리와 상호작용하려면 논리 주소와 물리 주소 간의 변환이 이루어져야 한다.

논리 주소와 물리 주소 간의 변환은 CPU와 주소 버스 사이에 위치한 메모리 관리 장치(MMU)라는 하드웨어에 의해 수행

MMU는 CPU가 발생시킨 논리 주소에 베이스 레지스터 값을 더하여 논리 주소를 물리 주소로 변환

베이스 레지스터는 프로그램의 가장 작은 물리 주소를 저장하고, 논리 주소는 프로그램의 시작점으로부터 떨어진 거리


### 메모리 보호 기법

다른 프로그램의 영역을 침범할 수 있는 명령어는 위험하기 때문에 논리 주소 범위를 벗어나는 명령어 실행을 방지하고, 실행 중인 프로그램이 다른 프로그램에 영향을 받지 않도록 보호하는 것을 한계 레지스터라는 레지스터가 담당

만약 CPU가 한계 레지스터보다 높은 논리 주소에 접근하려고 하면 인터럽트를 발생 시켜 실행을 중단


## 캐시 메모리

CPU가 메모리에 접근하는 시간은 CPU의 연산 속도보다 느리다.

이를 극복하기 위한 저장 장치가 캐시 메모리

캐시 메모리의 탄생 배경과 특징을 이해하려면 저장 장치 계층 구조를 봐야한다.

### 저장 장치 계층 구조

저장 장치는 아래와 같은 명제를 따른다 

1. CPU와 가까운 저장 장치는 빠르고, 멀리 있는 저장 장치는 느리다.
2. 속도가 빠른 저장 장치는 저장 용량이 작고, 가격이 비싸다.

즉, 용량을 원하면 속도는 감수해야 하고, 속도를 원하면 용량과 돈을 포기해야된다.

이런 저장 장치들의 장단점 때문에 다양한 저장 장치를 모두 사용하게 된다.

컴퓨터가 사용하는 저장 장치들은 ‘CPU에 얼마나 가까운가’를 기준으로 계층적으로 나타낼 수 있다.

이를 저장 장치 계층 구조라고 한다.


### 캐시 메모리

CPU가 메모리에 접근하는 속도는 레지스터에 접근하는 것보다 느리지만, 프로그램을 실행하는 과정에서 메모리에 빈번히 접근해야됨

→ CPU와 메모리 사이에 위치하고, 레지스터보다 용량이 크고 메모리보다 빠른 SRAM 기반의 저장장치인 캐시 메모리 등장

메모리에서 CPU가 사용할 일부 데이터를 미리 캐시 메모리로 가지고 와서 활용

컴퓨터 내부에는 여러 캐시 메모리가 있고, CPU와 가까운 순서대로 계층을 구성한다.

코어와 가장 가까운 캐시 메모리 순으로 L1,L2,L3 캐시라고 부른다.

캐시 메모리의 용량은 L1, L2, L3 순으로 커지고, 속도는 역순이다.

코어와 가장 가까운 L1 캐시는 조금이라도 접근 속도를 빠르게 만들기 위해서 명령어만 저장하는 L1I 캐시와 데이터만을 저장하는 L1D캐시로 분리하는 경우도 있다.


### 참조 지역성 원리

캐시 메모리는 메모리보다 용량이 작기때문에, 모든 내용을 저장할 수 없다.

캐시 메모리는 CPU가 사용할 법한 대상을 예측하여 저장한다.

예측한 데이터가 실제로 들어맞아 캐시 메모리 내 데이터가 CPU에서 활용될 경우 캐시 히드라고 한다.

예측이 틀려 메모리에서 필요한 데이터를 직접 가져와야 하는 경우는 캐시 미스라고 부른다.

예측을 맞추기 위해서 아래의 참조 지역성 원리를 따른다.

1. CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
    
    변수에 값을 저장하고 나면 다시 접근하여 변수에 저장된 값을 사용한다. 즉 ‘CPU는 변수가 저장된 메모리 공간을 언제든 다시 참조할 수 있다’는 것을 의미한다. 이렇게 다시 접근하려는 경향을 시간 지역성이라 한다.
    
2. CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다.
    
    CPU가 실행하려는 프로그램은 관련 데이터들끼리 한데 모여있다.
    
    접근한 메모리 공간 근처를 접근하려는 경향을 공간 지역성이라 한다.
